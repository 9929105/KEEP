{% extends 'base.html' %}
{% load staticfiles %}

{% block css %}
<link rel="stylesheet" type="text/css" href='{% static "/static/css/viz.css" %}'>
<link rel="stylesheet" type="text/css" href='{% static "/static/css/leaflet.css" %}'>
{% endblock %}

{% block js %}
<script id='form_id' type='text/plain'>{{form_id}}</script>
<script id='user' type='text/plain'>{{ user.username }}</script>
<script id='yaxis_tmpl' type='text/html'>
	<label class="radio">
  		<input type="radio" value="<%= value %>" <%= checked %>>
  		<%= label %>
	</label>
</script>

<script src='{% static "/static/js/vendor/json2.js" %}'></script>
<script src='{% static "/static/js/vendor/underscore-1.4.4.js" %}'></script>
<script src='{% static "/static/js/vendor/backbone-min.js" %}'></script>

<!-- Geo viz -->
<script src='{% static "/static/js/vendor/leaflet.js" %}'></script>

<!-- Chart viz -->
<script src='{% static "/static/js/vendor/d3.v3.min.js" %}'></script>
<script src='{% static "/static/js/viz.js" %}'></script>
<script type='text/javascript'>
	$( function() {
		// Initialize data
		document.initial_data = new DataCollection();
		document.initial_data.reset( {{data|safe }} );

		// Start up visualization
		document.vizApp = new DataView();
	});
</script>
{% endblock %}

{% block content %}
<div class='container' id='viz'>
	<div class='row'>
		<div class='span12'>
			<div class='btn-toolbar'>
				<div class='btn-group' id='chart_options'>
					<a href='#' data-type='raw' class='btn active'><i class='icon-map-marker'></i> Raw/Map</a>
					<a href='#' id='line_btn' data-type='line' class='btn'><i class='icon-signal'></i> Line</a>
				</div>
			</div>
		</div>
	</div>
	<div class='row viz viz-active' id='raw_viz'>
		<div class='span12' id='map'></div>
		<div class='span12' id='raw'></div>
	</div>
	<div class='row viz' id='line_viz'>
		<div class='span2'>
			<h4>Y-Axis Options</h4>
			<div id='yaxis_options'></div>
		</div>
		<div class='span10' id='line'></div>
	</div>
</div>
{% endblock %}